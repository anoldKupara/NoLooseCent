@model NoLooseCent.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Reports";
}

<h2 class="mb-4">Financial Reports</h2>

<!-- Nav tabs -->
<ul class="nav nav-tabs mb-4" id="reportTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="balance-tab" data-bs-toggle="tab" data-bs-target="#balance" type="button" role="tab">Balance Overview</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="monthly-tab" data-bs-toggle="tab" data-bs-target="#monthly" type="button" role="tab">Monthly Trends</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="category-tab" data-bs-toggle="tab" data-bs-target="#category" type="button" role="tab">Category Breakdown</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="netbalance-tab" data-bs-toggle="tab" data-bs-target="#netbalance" type="button" role="tab">Net Balance Trend</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="topexpenses-tab" data-bs-toggle="tab" data-bs-target="#topexpenses" type="button" role="tab">Top 5 Expenses</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="recurring-tab" data-bs-toggle="tab" data-bs-target="#recurring" type="button" role="tab">Recurring vs One-time</button>
    </li>
</ul>

<!-- Tab content -->
<div class="tab-content" id="reportTabsContent">
    <!-- Tab 1: Balance Overview -->
    <div class="tab-pane fade show active" id="balance" role="tabpanel">
        <h4 class="mb-3">USD vs ZWL Balance</h4>
        <div class="row justify-content-center mb-5">
            <div class="col-md-6">
                <canvas id="balanceChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Tab 2: Monthly Trends -->
    <div class="tab-pane fade" id="monthly" role="tabpanel">
        <h4 class="mt-3">Monthly Income and Expense Trends</h4>
        <p class="text-muted">Coming soon...</p>
    </div>

    <!-- Tab 3: Category Breakdown -->
    <div class="tab-pane fade" id="category" role="tabpanel">
        <h4 class="mt-3">Category Breakdown</h4>
        <p class="text-muted">Coming soon...</p>
    </div>

    <!-- Tab 4: Net Balance Trend -->
    <div class="tab-pane fade" id="netbalance" role="tabpanel">
        <h4 class="mt-3">Net Balance Over Time</h4>
        <p class="text-muted">Coming soon...</p>
    </div>

    <!-- Tab 5: Top 5 Expenses -->
    <div class="tab-pane fade" id="topexpenses" role="tabpanel">
        <h4 class="mt-3">Top 5 Expenses</h4>
        <p class="text-muted">Coming soon...</p>
    </div>

    <!-- Tab 6: Recurring vs One-time -->
    <div class="tab-pane fade" id="recurring" role="tabpanel">
        <h4 class="mt-3">Recurring vs One-time Transactions</h4>
        <p class="text-muted">Coming soon...</p>
    </div>
</div>

<!-- Chart.js Script -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    window.onload = function () {
        const balanceCtx = document.getElementById('balanceChart').getContext('2d');

        const usdBalance = parseFloat("@Model.UsdBalance");
        const zwlBalance = parseFloat("@Model.ZwlBalance");

        new Chart(balanceCtx, {
            type: 'doughnut',
            data: {
                labels: ['USD Balance', 'ZWL Balance'],
                datasets: [{
                    data: [usdBalance, zwlBalance],
                    backgroundColor: ['#007bff', '#ffc107'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    title: {
                        display: true,
                        text: 'USD vs ZWL Balance'
                    }
                }
            }
        });
    };
</script>