@model IEnumerable<NoLooseCent.Models.Currency>
@{
    ViewData["Title"] = "Currencies";
}

<!-- ─── External Fonts & Libraries ──────────────────────────────── -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" />

<div class="min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50 px-4 py-12 sm:px-6 lg:px-8 font-inter">

    <!-- ── Page Header ───────────────────────────────────────────── -->
    <div class="text-center mb-12">
        <h1 class="text-5xl font-extrabold text-indigo-700 tracking-tight mb-2">
            <i class="fas fa-coins text-yellow-500 mr-2"></i> Currencies
        </h1>
        <p class="text-gray-500 text-lg">All supported financial currencies</p>
        <hr class="mt-4 border-indigo-300 w-1/2 mx-auto opacity-30" />

        <a asp-action="Create"
           class="mt-6 inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow
                  hover:bg-blue-700 transform hover:scale-105 transition">
            <i class="fas fa-plus mr-2"></i> Add Currency
        </a>
    </div>

    <!-- ── Search Bar ────────────────────────────────────────────── -->
    <div class="flex justify-center mb-8">
        <input id="currencySearch" type="text" placeholder="Search currencies..."
               class="w-full max-w-xl px-5 py-3 border border-gray-300 rounded-xl shadow-sm bg-white
                      focus:ring-2 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none
                      transition placeholder-gray-400" />
    </div>

    <!-- ── Currency Table ────────────────────────────────────────── -->
    @if (!Model.Any())
    {
        <div class="text-center py-16 bg-white bg-opacity-80 rounded-2xl shadow-lg border">
            <p class="text-2xl font-semibold text-gray-800">No currencies found.</p>
            <p class="mt-3 text-sm text-gray-500">Click <em>Add Currency</em> to create your first record.</p>
        </div>
    }
    else
    {
        <div class="bg-white bg-opacity-90 rounded-2xl shadow-xl overflow-hidden">
            <!-- Table header -->
            <div class="bg-gradient-to-r from-blue-500 to-sky-400 text-white px-6 py-3 text-lg font-semibold flex items-center">
                <i class="fas fa-list mr-2"></i> Currency List
            </div>

            <div class="overflow-x-auto">
                <table class="min-w-full text-gray-800">
                    <thead class="text-xs font-semibold uppercase bg-gray-100 border-b border-gray-200">
                        <tr>
                            <th class="text-left px-6 py-4">ID</th>
                            <th class="text-left px-6 py-4">Name</th>
                            <th class="text-left px-6 py-4">Code</th>
                            <th class="text-center px-6 py-4">Actions</th>
                        </tr>
                    </thead>

                    <tbody id="currencyList" class="divide-y divide-gray-100">
                        @foreach (var item in Model)
                        {
                            <tr class="hover:bg-indigo-50 transition">
                                <td class="px-6 py-4">@item.Id</td>
                                <td class="px-6 py-4 font-medium text-indigo-700">@item.Name</td>
                                <td class="px-6 py-4">@item.Code</td>

                                <!-- Bordered icon buttons -->
                                <td class="px-6 py-4 text-center space-x-2">
                                    <a asp-action="Details" asp-route-id="@item.Id"
                                       class="inline-flex items-center justify-center w-9 h-9 rounded-md border border-blue-500
                                                      text-blue-600 hover:bg-blue-50 transition" title="View">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a asp-action="Edit" asp-route-id="@item.Id"
                                       class="inline-flex items-center justify-center w-9 h-9 rounded-md border border-gray-500
                                                      text-gray-700 hover:bg-gray-100 transition" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <a asp-action="Delete" asp-route-id="@item.Id"
                                       class="inline-flex items-center justify-center w-9 h-9 rounded-md border border-red-500
                                                      text-red-600 hover:bg-red-50 transition" title="Delete">
                                        <i class="fas fa-trash-alt"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>

<!-- ─── Scripts ─────────────────────────────────────────────────── -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
    // Serialize model for JS filtering
    const currencies = @Html.Raw(Json.Serialize(
                Model.Select(c => new { c.Id, c.Name, c.Code })
        ));

    /* Simple client-side search */
    $('#currencySearch').on('input', function () {
        const term = this.value.toLowerCase();
        const filtered = currencies.filter(c =>
            c.Id.toString().includes(term) ||
            c.Name.toLowerCase().includes(term) ||
            c.Code.toLowerCase().includes(term)
        );
        renderTable(filtered);
    });

    function renderTable(data) {
        const tbody = $('#currencyList').empty();
        data.forEach(c => {
            tbody.append(`
                <tr class="hover:bg-indigo-50 transition">
                    <td class="px-6 py-4">${c.Id}</td>
                    <td class="px-6 py-4 font-medium text-indigo-700">${c.Name}</td>
                    <td class="px-6 py-4">${c.Code}</td>
                    <td class="px-6 py-4 text-center space-x-2">
                        <a href="/Currencies/Details/${c.Id}"
                           class="inline-flex items-center justify-center w-9 h-9 rounded-md border border-blue-500 text-blue-600 hover:bg-blue-50 transition">
                           <i class="fas fa-eye"></i>
                        </a>
                        <a href="/Currencies/Edit/${c.Id}"
                           class="inline-flex items-center justify-center w-9 h-9 rounded-md border border-gray-500 text-gray-700 hover:bg-gray-100 transition">
                           <i class="fas fa-edit"></i>
                        </a>
                        <a href="/Currencies/Delete/${c.Id}"
                           class="inline-flex items-center justify-center w-9 h-9 rounded-md border border-red-500 text-red-600 hover:bg-red-50 transition">
                           <i class="fas fa-trash-alt"></i>
                        </a>
                    </td>
                </tr>`);
        });
    }
</script>