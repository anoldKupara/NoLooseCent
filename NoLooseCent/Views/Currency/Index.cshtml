@model IEnumerable<NoLooseCent.Models.Currency>
@{
    ViewData["Title"] = "Currency List";
}

<!-- Fonts & Styles -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" />
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 bg-gradient-to-br from-gray-50 to-indigo-50 min-h-screen font-inter">
    <div class="flex items-center justify-between mb-10">
        <h2 class="text-4xl font-extrabold text-gray-900 flex items-center tracking-tight">
            <i class="fas fa-coins text-indigo-500 mr-3"></i> Currency Dashboard
        </h2>
        <a asp-action="Create" class="inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white text-sm font-semibold rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105">
            <i class="fas fa-plus mr-2"></i> Add Currency
        </a>
    </div>

    @if (!Model.Any())
    {
        <div class="text-center py-16 bg-white bg-opacity-80 backdrop-blur-md rounded-2xl shadow-lg border border-gray-100">
            <p class="text-2xl font-semibold text-gray-800">No currencies yet.</p>
            <p class="mt-3 text-sm text-gray-500">Start adding currencies by clicking "Add Currency" above.</p>
        </div>
    }
    else
    {
        <div class="flex flex-wrap justify-between items-center gap-4 mb-10">
            <input type="text" id="currencySearch" placeholder="Search currencies..." class="flex-1 min-w-[250px] px-5 py-3 border border-gray-200 rounded-xl shadow-sm bg-white bg-opacity-80 backdrop-blur-md focus:ring-2 focus:ring-indigo-400 focus:border-indigo-500 focus:outline-none transition-all duration-300 text-gray-800 placeholder-gray-400" />
        </div>

        <div class="bg-white bg-opacity-90 backdrop-blur-md rounded-2xl shadow-xl overflow-hidden">
            <div class="grid grid-cols-4 gap-4 px-6 py-4 text-gray-700 font-semibold uppercase tracking-wider text-xs bg-gradient-to-r from-indigo-50 to-purple-50 sticky top-0 z-10">
                <div>ID</div>
                <div>Name</div>
                <div>Code</div>
                <div>Actions</div>
            </div>
            <div id="currencyList" class="divide-y divide-gray-100">
                @foreach (var item in Model)
                {
                    <div class="grid grid-cols-4 gap-4 px-6 py-4 relative group transition-all duration-300 hover:bg-indigo-50/30 hover:shadow-inner">
                        <div class="text-gray-800">@item.Id</div>
                        <div class="font-medium text-indigo-600 relative">
                            @item.Name
                            <div class="absolute z-30 hidden group-hover:block bg-gradient-to-r from-gray-800 to-gray-900 text-white p-3 text-xs rounded-lg shadow-xl -top-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300">
                                Code: @item.Code
                                <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-3 h-3 bg-gray-900 rotate-45"></div>
                            </div>
                        </div>
                        <div class="text-gray-800">@item.Code</div>
                        <div class="flex space-x-3">
                            <a asp-action="Edit" asp-route-id="@item.Id" class="text-indigo-600 hover:text-indigo-800 transition-all duration-200 transform hover:scale-110">
                                <i class="fas fa-edit"></i>
                            </a>
                            <a asp-action="Details" asp-route-id="@item.Id" class="text-blue-600 hover:text-blue-800 transition-all duration-200 transform hover:scale-110">
                                <i class="fas fa-info-circle"></i>
                            </a>
                            <a asp-action="Delete" asp-route-id="@item.Id" class="text-red-600 hover:text-red-800 transition-all duration-200 transform hover:scale-110">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
    const currencies = @Html.Raw(Json.Serialize(Model.Select(c => new { c.Id, c.Name, c.Code })));

    $('#currencySearch').on('keyup', function () {
        const searchTerm = this.value.toLowerCase();
        const filtered = currencies.filter(item =>
            item.Id.toString().toLowerCase().includes(searchTerm) ||
            item.Name.toLowerCase().includes(searchTerm) ||
            item.Code.toLowerCase().includes(searchTerm)
        );
        renderTable(filtered);
    });

    function renderTable(data) {
        const container = $('#currencyList');
        container.empty();
        data.forEach(item => {
            container.append(`
                <div class="grid grid-cols-4 gap-4 px-6 py-4 relative group transition-all duration-300 hover:bg-indigo-50/30 hover:shadow-inner">
                    <div class="text-gray-800">${item.Id}</div>
                    <div class="font-medium text-indigo-600 relative">
                        ${item.Name}
                        <div class="absolute z-30 hidden group-hover:block bg-gradient-to-r from-gray-800 to-gray-900 text-white p-3 text-xs rounded-lg shadow-xl -top-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300">
                            Code: ${item.Code}
                            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-3 h-3 bg-gray-900 rotate-45"></div>
                        </div>
                    </div>
                    <div class="text-gray-800">${item.Code}</div>
                    <div class="flex space-x-3">
                        <a href="/Currencies/Edit/${item.Id}" class="text-indigo-600 hover:text-indigo-800 transition-all duration-200 transform hover:scale-110">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="/Currencies/Details/${item.Id}" class="text-blue-600 hover:text-blue-800 transition-all duration-200 transform hover:scale-110">
                            <i class="fas fa-info-circle"></i>
                        </a>
                        <a href="/Currencies/Delete/${item.Id}" class="text-red-600 hover:text-red-800 transition-all duration-200 transform hover:scale-110">
                            <i class="fas fa-trash"></i>
                        </a>
                    </div>
                </div>
            `);
        });
    }
</script>

<!-- Custom Styling -->
<style>
    body {
        font-family: 'Inter', sans-serif;
    }

    #currencyList {
        max-height: 70vh;
        overflow-y: auto;
    }

    #currencyList > div {
        transition: all 0.3s ease;
    }

    #currencyList > div:hover {
        background: rgba(224, 231, 255, 0.3);
        box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05), inset -2px -2px 5px rgba(255, 255, 255, 0.5);
    }

    #currencyList .group-hover\\:block {
        transition: opacity 0.3s ease, transform 0.3s ease;
    }
</style> 